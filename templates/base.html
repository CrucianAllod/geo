<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Добавить полигон</title>
</head>
<body>
<div class="container">
    <h2>Добавить полигон</h2>
    <form id="polygonForm">
        <div class="form-group">
            <label for="polygonName">Название полигона</label>
            <input type="text" class="form-control" id="polygonName" name="name" required>
        </div>
        <div class="form-group">
            <label for="polygonCoordinates">Координаты полигона (в формате JSON)</label>
            <textarea class="form-control" id="polygonCoordinates" name="polygon" required></textarea>
        </div>
        <button type="button" class="btn btn-primary" onclick="addPolygon()">Добавить</button>
        <button type="submit" class="btn btn-success">Отправить</button>
    </form>

    <h3>Список полигонов</h3>
    <table class="table table-bordered" id="polygonTable">
        <thead>
            <tr>
                <th>Название</th>
                <th>Координаты</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
let polygons = [];

function addPolygon() {
    const name = $('#polygonName').val();
    const polygon = $('#polygonCoordinates').val();

    try {
        const polygonData = JSON.parse(polygon);

        polygons.push({ name, polygon: polygonData });


        updatePolygonTable();

        $('#polygonName').val('');
        $('#polygonCoordinates').val('');
    } catch (e) {
        alert('Некорректный формат координат. Пожалуйста, введите корректный JSON.');
    }
}

function updatePolygonTable() {
    const tableBody = $('#polygonTable tbody');x
    tableBody.empty();

    polygons.forEach((poly, index) => {
        const row = `<tr>
            <td>${poly.name}</td>
            <td>${JSON.stringify(poly.polygon)}</td>
        </tr>`;
        tableBody.append(row);
    });
}

$('#polygonForm').on('submit', function(event) {
    event.preventDefault();
    const jsonData = JSON.stringify(polygons);
    console.log('Отправка данных на сервер:', jsonData);

});
</script>
</body>
</html>