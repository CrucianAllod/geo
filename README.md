# Мануал для разработчика: Проект GeoProj

## Описание проекта
Проект GeoProj представляет собой веб-приложение, которое позволяет пользователям создавать и просматривать полигоны 
на карте с использованием Django и Folium. Приложение использует PostGIS для хранения геометрических данных.

## Требования

- Docker
- Docker Compose 

## Установка и запуск проекта

### Шаг 1: Клонирование репозитория

Сначала вам нужно клонировать этот репозиторий на ваш локальный компьютер. Для этого выполните следующую команду:

```bash
git clone https://github.com/CrucianAllod/geo.git
cd geoProj
```

### Шаг 2: Настройка окружения

Создайте файл .env в корневой директории проекта и добавьте необходимые переменные окружения. Пример файла .env(вы можете использовать эти данные, в своем .env):

```
SECRET_KEY=django-insecure-mi47u47=bnpx%mgx@axt(64fv+m^icw6q6y#bvfr-jlsza$_*2
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0
DB_NAME=geo
DB_USER=postgres
DB_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432
```

### Шаг 3: Построение Docker-образа

Убедитесь, что вы находитесь в корневой директории проекта, где находится ваш Dockerfile. Выполните команду для сборки Docker-образа:

```bash
docker-compose build
```

### Шаг 4: Запуск контейнера

Используйте следующую команду, чтобы запустить контейнеры:

```bash
docker-compose up
```

Контейнеры будут запущены в фоновом режиме. Если вы хотите видеть логи, добавьте флаг -d:

```bash
docker-compose up -d
```
### Шаг 5: Открытие веб-приложения и API

Перейдите в ваш браузер и откройте http://0.0.0.0:8000/, чтобы использовать приложение. Для работы с API используйте следующий путь:
- API для работы с полигонами: http://0.0.0.0:8000/api/polygons/

### Шаг 6: Доступ к Swagger UI

Для доступа к Swagger UI, откройте http://0.0.0.0:8000/swagger/. Это позволит вам просматривать и тестировать API без необходимости аутентификации.

### Шаг 7: Использование pgAdmin

Чтобы управлять вашей базой данных PostgreSQL, вы можете использовать pgAdmin. Для доступа к pgAdmin откройте в браузере http://0.0.0.0:5050/.

#### Шаги для входа в pgAdmin:
1. Откройте http://0.0.0.0:5050/ в браузере.
2. Введите следующие учетные данные:
    - Email: admin@admin.com
    - Пароль: admin
3. После входа в систему добавьте сервер:
    - Нажмите на "Add New Server".
    - Введите имя сервера (например, GeoDB).
    - Перейдите на вкладку "Connection" и введите следующие параметры:
        - Host name/address: db
        - Port: 5432
        - Username: postgres
        - Password: postgres
4. Нажмите "Save" для сохранения настроек.

Теперь вы можете управлять вашей базой данных через pgAdmin.

# Использование API

Проект предоставляет RESTful API для работы с полигонами. Вы можете использовать следующие эндпоинты:

- Создание полигона: POST /api/polygons/create/
- Получение списка полигонов: GET /api/polygons/list/
- Получение, обновление или удаление полигона: GET/PUT/DELETE /api/polygons/{id}/


# Логи

Чтобы посмотреть логи контейнера, используйте команду:

```bash
docker-compose logs web
```

# Дополнительные настройки

Если вам нужно добавить дополнительные зависимости или изменить настройки проекта, вы можете редактировать файл requirements.txt и пересобрать образ с помощью команды:

```bash
docker-compose build
```

# Заключение

Этот проект предоставляет базовую функциональность для работы с полигонами на карте. Вы можете расширять его, добавляя новые функции и улучшая интерфейс. Если у вас есть вопросы или предложения, не стесняйтесь обращаться за помощью!

